<html><head><base href="/" /><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
    

    <!-- SEO Essencial -->
    <meta name="description" content="Bruna Leoncio é psicóloga especializada em Terapia Cognitivo-Comportamental com atendimento online e presencial em São Marcos - RS. Também atua com foco em profissionais do setor tributário.">
    <meta name="keywords" content="psicóloga em São Marcos, terapia online, psicologia clínica, terapia para tributaristas, psicóloga Bruna Leoncio, TCC, terapia cognitivo-comportamental, psicóloga especializada, saúde mental, terapia individual, psicóloga para profissionais do direito, psicóloga para contadores">
    <meta name="author" content="Psicóloga Bruna Leoncio">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="/">
    
    <!-- Open Graph para redes sociais (Facebook, LinkedIn etc.) -->
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Psicóloga Bruna Leoncio">
    <meta property="og:title" content="Psicóloga Bruna Leoncio | Atendimento em São Marcos - RS e Online">
    <meta property="og:description" content="Com mais de 10 anos de experiência, Bruna Leoncio oferece psicoterapia com abordagem em TCC, acolhendo demandas de pacientes em geral e profissionais da área tributária.">
    <meta property="og:image" content="/midias/og-image.png">
    <meta property="og:url" content="/">
    
    <!-- Twitter Cards (opcional, mas recomendado) -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Psicóloga Bruna Leoncio | Psicoterapia Online e em São Marcos - RS">
    <meta name="twitter:description" content="Psicóloga especializada em TCC com foco em terapia para profissionais da área tributária. Atendimentos online e presenciais.">
    <meta name="twitter:image" content="https://www.brunaleonciopsicologa.com.br/midias/og-image.png">
    
    <!-- Favicon e ícones -->
    <link rel="icon" type="image/png" sizes="40x40" href="midias/favicon-40x40.png">
    <link rel="icon" type="image/png" sizes="120x120" href="midias/favicon-120x120.png">
    <link rel="apple-touch-icon" sizes="180x180" href="midias/favicon-180x180.png">
    
        <!-- Comentário sobre o desenvolvimento -->
        <!-- Site desenvolvido por FOSSIO FORCE - https://fossioforce.com.br -->
        <!-- Desenvolvedor - Fossio -->
    
    
    
    
    <title>PsicoApp Omboard</title><style>
    :root {
        --primary: #6B4423;
        --secondary: #A67B5B;
        --accent: #D4A373;
        --background: #F5F1EA;
        --white: #FFFFFF;
        --gradient-1: linear-gradient(135deg, #D4A373 0%, #A67B5B 100%);
        --gradient-2: linear-gradient(135deg, #F5F1EA 0%, #E6DFD3 100%);
        --shadow-sm: 0 2px 4px rgba(0,0,0,0.05);
        --shadow-md: 0 4px 6px rgba(0,0,0,0.1);
        --shadow-lg: 0 10px 15px rgba(0,0,0,0.1);
        --radius-sm: 10px;
        --radius-md: 15px;
        --radius-lg: 20px;
    }
    
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: 'Inter', sans-serif;
        -webkit-font-smoothing: antialiased;
    }
    
    body {
        background-color: var(--background);
        color: var(--primary);
        line-height: 1.6;
        margin: 0;
        min-height: 100vh;
        position: relative;
        padding-bottom: 60px; /* Height of footer */
    }
    
    .app-container {
        max-width: 100%;
        margin: 0 auto;
        position: relative;
        min-height: calc(100vh - 60px); /* Account for footer height */
    }
    
    .top-nav {
        background: var(--white);
        padding: 0.8rem;
        box-shadow: var(--shadow-md);
        position: sticky;
        top: 0;
        z-index: 100;
        backdrop-filter: blur(10px);
        height: 60px;
        display: flex;
        align-items: center;
    }
    
    .logo {
        display: flex;
        align-items: center;
        gap: 8px;
        justify-content: center;
    }
    
    .logo h1 {
        font-size: 1.4rem;
        font-weight: 700;
        background: var(--gradient-1);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }
    
    .submenu {
        background: var(--white);
        padding: 8px 12px;
        border-radius: 0; 
        box-shadow: var(--shadow-md);
        position: sticky;
        top: 60px;
        z-index: 90;
        backdrop-filter: blur(10px);
        overflow-x: auto;
        white-space: nowrap;
        scrollbar-width: none; 
        -ms-overflow-style: none; 
        display: flex;
        gap: 15px;
    }
    
    .submenu::-webkit-scrollbar {
        display: none;
    }
    
    .submenu-item {
        display: inline-flex;
        align-items: center;
        color: var(--secondary);
        text-decoration: none;
        padding: 8px 12px;
        border-radius: var(--radius-sm);
        transition: all 0.3s ease;
        font-size: 0.9rem;
        font-weight: 500;
        flex-shrink: 0;
    }
    
    .submenu-item.active {
        background: var(--gradient-1);
        color: var(--white);
    }
    
    .submenu-item:hover {
        background: var(--gradient-2);
        color: var(--primary);
        transform: translateY(-2px);
    }
    
    .submenu-icon {
        width: 18px;
        height: 18px;
        margin-right: 6px;
    }
    
    .screen {
        display: none;
        padding: 20px;
        padding-bottom: 80px; /* Add padding to prevent footer overlap */
        min-height: calc(100vh - 130px); /* Adjust for header + submenu height */
        animation: fadeIn 0.3s ease;
    }
    
    .screen.active {
        display: block;
    }
    
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    
    .audience-grid, .leads-grid, .clients-grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: 20px;
        margin-top: 20px;
    }
    
    .audience-card, .contact-card {
        background: var(--white);
        border-radius: var(--radius-md);
        padding: 25px;
        box-shadow: var(--shadow-md);
        transition: all 0.3s ease;
        border: 1px solid rgba(214, 214, 214, 0.5);
        position: relative;
        overflow: hidden;
    }
    
    .audience-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 5px;
        background: var(--gradient-1);
    }
    
    .audience-card:hover, .contact-card:hover {
        transform: translateY(-5px);
        box-shadow: var(--shadow-lg);
    }
    
    .audience-card h3, .contact-name {
        color: var(--primary);
        margin-bottom: 20px;
        font-size: 1.3rem;
        font-weight: 600;
        position: relative;
        padding-bottom: 10px;
    }
    
    .audience-card h3::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        width: 40px;
        height: 3px;
        background: var(--accent);
        border-radius: 2px;
    }
    
    .audience-list, .contact-details {
        list-style: none;
        margin-top: 15px;
    }
    
    .audience-list li {
        margin-bottom: 12px;
        display: flex;
        align-items: center;
        gap: 10px;
        font-size: 0.95rem;
        position: relative;
        padding-left: 20px;
    }
    
    .audience-list li::before {
        content: "•";
        color: var(--accent);
        font-weight: bold;
        position: absolute;
        left: 0;
    }
    
    .pain-points {
        background: var(--white);
        border-radius: var(--radius-md);
        padding: 25px;
        box-shadow: var(--shadow-md);
    }
    
    .pain-item {
        background: var(--gradient-2);
        padding: 15px 20px;
        border-radius: var(--radius-sm);
        margin-bottom: 12px;
        box-shadow: var(--shadow-sm);
        transition: all 0.3s ease;
        border: 1px solid rgba(214, 214, 214, 0.3);
    }
    
    .pain-item:hover {
        transform: scale(1.02);
        box-shadow: var(--shadow-md);
    }
    
    .clients-grid {
        display: flex;
        flex-direction: column;
        gap: 15px;
    }
    
    .client-card {
        background: var(--white);
        border-radius: var(--radius-md);
        padding: 20px;
        box-shadow: var(--shadow-md);
        cursor: pointer;
        transition: all 0.3s ease;
        display: grid;
        grid-template-columns: 1fr auto;
        gap: 15px;
        align-items: center;
    }
    
    .client-card:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-lg);
    }
    
    .client-sort {
        background: var(--white);
        padding: 15px;
        margin-bottom: 20px;
        border-radius: var(--radius-md);
        display: flex;
        flex-direction: column;
        gap: 15px;
    }
    
    .search-container {
        width: 100%;
        position: relative;
    }
    
    .search-input {
        width: 100%;
        padding: 12px 15px;
        border: 1px solid var(--secondary);
        border-radius: var(--radius-sm);
        font-size: 0.95rem;
        color: var(--primary);
        background: var(--white);
        transition: all 0.3s ease;
    }
    
    .search-input:focus {
        outline: none;
        border-color: var(--accent);
        box-shadow: var(--shadow-sm);
    }
    
    .sort-buttons-container {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        padding: 10px 0;
        border-top: 1px solid var(--background);
        border-bottom: 1px solid var(--background);
    }
    
    .sort-button {
        padding: 10px 20px;
        border: none;
        border-radius: var(--radius-sm);
        background: var(--gradient-2);
        color: var(--primary);
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: 500;
    }
    
    .sort-button:hover {
        background: var(--gradient-1);
        color: var(--white);
        transform: translateY(-2px);
        box-shadow: var(--shadow-sm);
    }
    
    .sort-button:active {
        transform: translateY(0);
        box-shadow: var(--shadow-md);
    }
    
    .sort-button.active {
        background: var(--gradient-1);
        color: var(--white);
        transform: translateY(-2px);
        box-shadow: var(--shadow-sm);
    }
    
    .client-category {
        display: inline-block;
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 0.8rem;
        background: var(--gradient-2);
        color: var(--primary);
        margin-top: 5px;
    }
    
    .client-message-btn {
        background: var(--gradient-1);
        color: var(--white);
        border: none;
        padding: 10px 20px;
        border-radius: var(--radius-sm);
        display: flex;
        align-items: center;
        gap: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
        text-decoration: none;
        box-shadow: var(--shadow-sm);
    }
    
    .client-message-btn:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-md);
        background: var(--gradient-2);
        color: var(--primary);
    }
    
    .side-menu {
        position: fixed;
        top: 0;
        right: -400px; /* Posição inicial fora da tela */
        width: 90%; /* Largura máxima de 90% */
        max-width: 400px; /* Largura máxima em pixels */
        height: 100vh;
        background: var(--white);
        box-shadow: var(--shadow-lg);
        padding: 20px;
        transition: right 0.3s ease;
        overflow-y: auto; /* Permite rolagem se o conteúdo exceder a altura */
        z-index: 1000;
    }
    
    .side-menu.active {
        right: 0; /* Move o menu para a tela */
    }
    
    .side-menu-close {
        position: absolute;
        top: 20px;
        right: 20px;
        background: none;
        border: none;
        cursor: pointer;
        color: var(--primary);
    }
    
    .client-details {
        margin-top: 60px;
    }
    
    .client-details-section {
        background: var(--white);
        border-radius: var(--radius-md);
        padding: 20px;
        margin-bottom: 20px;
        box-shadow: var(--shadow-sm);
    }
    
    .client-details-section h3 {
        color: var(--primary);
        font-size: 1.4rem;
        margin-bottom: 15px;
        padding-bottom: 10px;
        border-bottom: 2px solid var(--accent);
    }
    
    .client-details-section h4 {
        color: var(--primary);
        font-size: 1.1rem;
        margin-bottom: 12px;
    }
    
    .sessions-list {
        list-style: none;
    }
    
    .sessions-list li {
        display: flex;
        justify-content: space-between;
        padding: 12px;
        border-bottom: 1px solid var(--background);
        gap: 15px;
    }
    
    .sessions-list li:last-child {
        border-bottom: none;
    }
    
    .leads-grid {
        display: flex;
        flex-direction: column;
        gap: 12px;
        margin-top: 20px;
    }
    
    .contact-card {
        display: grid;
        grid-template-columns: 1fr auto;
        align-items: center;
        background: var(--white);
        border-radius: var(--radius-md);
        padding: 15px 20px;
        box-shadow: var(--shadow-md);
        transition: all 0.3s ease;
        gap: 15px;
        border: 1px solid rgba(214, 214, 214, 0.5);
    }
    
    .contact-card:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-lg);
    }
    
    .lead-modal {
        display: none;
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0,0,0,0.5);
        animation: fadeIn 0.3s ease;
    }
    
    .lead-modal-content {
        background: var(--white);
        margin: 10% auto;
        padding: 25px;
        border-radius: var(--radius-md);
        width: 90%;
        max-width: 500px;
        position: relative;
        animation: slideIn 0.3s ease;
        box-shadow: var(--shadow-lg);
    }
    
    .lead-modal-close {
        position: absolute;
        right: 15px;
        top: 15px;
        font-size: 24px;
        font-weight: 500;
        cursor: pointer;
        color: var(--secondary);
        background: none;
        border: none;
        padding: 5px;
        line-height: 1;
        transition: all 0.3s ease;
    }
    
    .lead-modal-close:hover {
        color: var(--primary);
    }
    
    .lead-details-content {
        margin-top: 10px;
    }
    
    .lead-details-content h3 {
        color: var(--primary);
        font-size: 1.4rem;
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 2px solid var(--accent);
    }
    
    .lead-info {
        display: flex;
        flex-direction: column;
        gap: 12px;
    }
    
    .lead-info p {
        color: var(--primary);
        font-size: 0.95rem;
    }
    
    .lead-info p strong {
        color: var(--secondary);
        margin-right: 8px;
    }
    
    .lead-modal .whatsapp-btn {
        background: var(--gradient-1);
        width: 100%;
        justify-content: center;
        font-size: 1rem;
        padding: 12px 20px;
        margin-top: 25px;
    }
    
    @keyframes slideIn {
        from { transform: translateY(-100px); opacity: 0; }
        to { transform: translateY(0); opacity: 1; }
    }
    
    .filter-container {
        display: flex;
        flex-direction: column; /* Muda para coluna em telas menores */
        gap: 10px; /* Espaçamento entre os elementos */
        width: 100%; /* Garante que o container ocupe toda a largura */
    }
    
    .filter-select {
        width: 100%; /* Garante que o select ocupe toda a largura do container */
        padding: 12px 15px;
        border: 1px solid var(--secondary);
        border-radius: var(--radius-sm);
        background: var(--white);
        color: var(--primary);
        font-size: 0.95rem;
        transition: all 0.3s ease;
    }
    
    @media (min-width: 768px) {
        .filter-container {
            flex-direction: row; /* Muda para linha em telas maiores */
        }
    }
    
    .filter-select:focus {
        outline: none;
        border-color: var(--accent);
        box-shadow: var(--shadow-sm);
    }
    
    .status-checkbox-container {
        margin-top: 8px;
        display: flex;
        align-items: center;
        gap: 8px;
    }
    
    .status-checkbox {
        width: 18px;
        height: 18px;
        accent-color: var(--accent);
        cursor: pointer;
    }
    
    .checkbox-label {
        font-size: 0.8rem;
        color: var(--secondary);
        cursor: pointer;
    }
    
    .contact-details {
        display: flex;
        flex-direction: column;
        gap: 8px;
    }
    
    .contact-name {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 8px;
    }
    
    .lead-whatsapp-btn {
        background: var(--gradient-1);
        color: var(--white);
        border: none;
        padding: 12px;
        border-radius: var(--radius-sm);
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.3s ease;
        width: 45px;
        height: 45px;
    }
    
    .lead-whatsapp-btn:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-md);
    }
    
    .posts-grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: 20px;
        margin-top: 20px;
    }
    
    @media (min-width: 768px) {
        .posts-grid {
            grid-template-columns: repeat(2, 1fr);
        }
    }
    
    .post-card {
        background: var(--white);
        border-radius: var(--radius-md);
        padding: 20px;
        box-shadow: var(--shadow-md);
        transition: all 0.3s ease;
        border: 1px solid rgba(214, 214, 214, 0.5);
    }
    
    .post-card:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-lg);
    }
    
    .post-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
    }
    
    .post-channel {
        display: flex;
        align-items: center;
        gap: 8px;
        color: var(--primary);
    }
    
    .post-channel i {
        font-size: 1.2rem;
    }
    
    .post-status {
        padding: 4px 8px;
        border-radius: 12px;
        font-size: 0.75rem;
        font-weight: 500;
    }
    
    .status-rascunho {
        background: #FFF3E0;
        color: #E65100;
    }
    
    .status-agendado {
        background: #E3F2FD;
        color: #1976D2;
    }
    
    .status-publicado {
        background: #E8F5E9;
        color: #2E7D32;
    }
    
    .post-content {
        margin-bottom: 15px;
    }
    
    .post-content h3 {
        color: var(--primary);
        margin-bottom: 10px;
        font-size: 1.1rem;
    }
    
    .post-content img {
        width: 100%;
        border-radius: var(--radius-sm);
        margin: 10px 0;
    }
    
    .post-content p {
        color: var(--secondary);
        font-size: 0.9rem;
        line-height: 1.4;
    }
    
    .post-footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 15px;
        padding-top: 15px;
        border-top: 1px solid var(--background);
    }
    
    .post-date {
        color: var(--secondary);
        font-size: 0.8rem;
    }
    
    .channel-link {
        display: flex;
        align-items: center;
        gap: 6px;
        color: var(--accent);
        text-decoration: none;
        font-size: 0.9rem;
        transition: all 0.3s ease;
    }
    
    .channel-link:hover {
        color: var(--primary);
        transform: translateX(2px);
    }
    
    .sort-section {
        background: var(--white);
        padding: 15px;
        border-radius: var(--radius-md);
        box-shadow: var(--shadow-md);
        margin-bottom: 20px;
    }
    
    .whatsapp-btn {
        background: #25D366;
        color: white;
        border: none;
        padding: 8px 12px;
        border-radius: var(--radius-sm);
        display: flex;
        align-items: center;
        gap: 6px;
        cursor: pointer;
        transition: all 0.3s ease;
        text-decoration: none;
    }
    
    .whatsapp-btn:hover {
        background: #128C7E;
    }
    
    .status-badge {
        display: inline-block;
        padding: 4px 8px;
        border-radius: 12px;
        font-size: 0.75rem;
        font-weight: 500;
        margin-left: 8px;
    }
    
    .status-new {
        background: #E3F2FD;
        color: #1976D2;
    }
    
    .status-active {
        background: #E8F5E9;
        color: #2E7D32;
    }
    
    .status-inactive {
        background: #FFEBEE;
        color: #C62828;
    }
    
    .post-actions {
        position: relative;
    }
    
    .post-menu-btn {
        background: none;
        border: none;
        color: var(--secondary);
        padding: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
        border-radius: var(--radius-sm);
    }
    
    .post-menu-btn:hover {
        background: var(--gradient-2);
        color: var(--primary);
    }
    
    .post-edit-form {
        display: flex;
        flex-direction: column;
        gap: 15px;
    }
    
    .form-group {
        display: flex;
        flex-direction: column;
        gap: 8px;
    }
    
    .form-group label {
        color: var(--primary);
        font-weight: 500;
    }
    
    .form-input {
        padding: 12px;
        border: 1px solid var(--secondary);
        border-radius: var(--radius-sm);
        font-size: 0.95rem;
        color: var(--primary);
        background: var(--white);
        transition: all 0.3s ease;
    }
    
    .form-input:focus {
        outline: none;
        border-color: var(--accent);
        box-shadow: var(--shadow-sm);
    }
    
    .form-textarea {
        min-height: 100px;
        resize: vertical;
    }
    
    .form-actions {
        display: flex;
        gap: 10px;
        margin-top: 20px;
    }
    
    .form-submit {
        background: var(--gradient-1);
        color: var(--white);
        border: none;
        padding: 12px 24px;
        border-radius: var(--radius-sm);
        cursor: pointer;
        transition: all 0.3s ease;
        flex: 1;
    }
    
    .form-submit:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-md);
    }
    
    .form-cancel {
        background: var(--gradient-2);
        color: var(--primary);
        border: none;
        padding: 12px 24px;
        border-radius: var(--radius-sm);
        cursor: pointer;
        transition: all 0.3s ease;
    }
    
    .form-cancel:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-md);
    }
    
    .delete-confirm {
        background: #FFEBEE;
        color: #C62828;
        padding: 20px;
        border-radius: var(--radius-md);
        margin-top: 20px;
        text-align: center;
    }
    
    .delete-actions {
        display: flex;
        gap: 10px;
        margin-top: 15px;
        justify-content: center;
    }
    
    .delete-btn {
        background: #C62828;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: var(--radius-sm);
        cursor: pointer;
        transition: all 0.3s ease;
    }
    
    .delete-btn:hover {
        background: #B71C1C;
        transform: translateY(-2px);
    }
    
    .cancel-btn {
        background: var(--gradient-2);
        color: var(--primary);
        border: none;
        padding: 10px 20px;
        border-radius: var(--radius-sm);
        cursor: pointer;
        transition: all 0.3s ease;
    }
    
    .cancel-btn:hover {
        transform: translateY(-2px);
    }
    
    .main-footer {
        background: var(--primary);
        color: var(--white);
        padding: 1rem;
        text-align: center;
        position: absolute; 
        bottom: 0;
        left: 0;
        right: 0;
        width: 100%;
        height: 60px;
    }
    
    .footer-content {
        max-width: 768px;
        margin: 0 auto;
    }
    
    .footer-content p {
        margin: 0;
        font-size: 0.9rem;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        flex-wrap: wrap;
    }
    
    .fossio-force-link {
        font-family: 'Ancherr', sans-serif;
        font-size: 1.5rem;
        color: var(--accent);
        text-decoration: none;
        transition: all 0.3s ease;
    }
    
    .fossio-force-link:hover {
        color: var(--white);
        transform: scale(1.05);
    }
    
    @media (max-width: 768px) {
        .footer-content p {
            font-size: 0.8rem;
        }
        
        .fossio-force-link {
            font-size: 1.2rem;
        }
    }
    
    .audience-grid:last-child,
    .leads-grid:last-child,
    .clients-grid:last-child {
        margin-bottom: 50px;
    }
    
    #home > *:last-child,
    #target > *:last-child,
    #instagram > *:last-child,
    #tasks > *:last-child,
    #leads > *:last-child,
    #clients > *:last-child,
    #social > *:last-child {
        margin-bottom: 50px;
    }
    
    .app-alert {
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 15px 25px;
        border-radius: var(--radius-md);
        background: var(--gradient-1);
        color: var(--white);
        box-shadow: var(--shadow-md);
        z-index: 2000;
        animation: slideIn 0.3s ease;
        display: flex;
        align-items: center;
        gap: 10px;
    }
    
    .app-alert.error {
        background: #DC3545;
    }
    
    .app-alert-close {
        background: none;
        border: none;
        color: var(--white);
        cursor: pointer;
        padding: 5px;
        margin-left: 10px;
        opacity: 0.8;
        transition: opacity 0.3s ease;
    }
    
    .app-alert-close:hover {
        opacity: 1;
    }
    
    @keyframes slideIn {
        from { transform: translateX(100%); opacity: 0; }
        to { transform: translateX(0); opacity: 1; }
    }
    
    .sort-section {
        display: flex;
        align-items: center;
        gap: 10px; /* Ajuste o valor conforme necessário */
    }
    
    .sort-section .form-submit {
        margin-left: auto; /* Isso empurra o botão para a direita */
    }
    
    /* Adicione regras para responsividade, se necessário */
    @media (max-width: 768px) {
        .sort-section {
            flex-direction: column; /* Muda para coluna em telas menores */
            align-items: flex-start; /* Alinha os itens à esquerda */
        }
    
        .sort-section .form-submit {
            margin-left: 0; /* Remove a margem à esquerda no mobile */
            width: 100%; /* Faz o botão ocupar toda a largura */
        }
    }

    @media (max-width: 768px) {
        .side-menu {
            width: 90%; /* Garante que o menu ocupe 90% da tela em dispositivos móveis */
            padding: 10px; /* Ajusta o padding para telas menores */
        }

        .client-details-section {
            padding: 10px; /* Ajusta o padding das seções dentro do menu */
        }

        .form-input {
            width: 100%; /* Garante que os inputs ocupem toda a largura */
            padding: 10px; /* Ajusta o padding dos inputs */
        }

        .form-actions {
            flex-direction: column; /* Muda para coluna em telas menores */
            gap: 10px; /* Espaçamento entre os botões */
        }
    }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"></head><body>
    
    <div class="app-container">
        <nav class="top-nav">
            <div class="logo">
                <svg class="nav-icon" viewBox="0 0 24 24">
                    <path d="M12 2L9 9H2L7 14L5 21L12 17L19 21L17 14L22 9H15L12 2Z"/>
                </svg>
                <h1>PsicoApp</h1>
            </div>
        </nav>
    
        <div class="submenu">
            <a href="#target" class="submenu-item" onclick="switchScreen('target')">
                <svg class="submenu-icon" viewBox="0 0 24 24">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.93 14.24l-1.09.47c-.37.16-.77.24-1.17.24-1.37 0-2.49-.99-2.49-2.22 0-1.23 1.12-2.22 2.49-2.22.4 0 .8.08 1.17.24l1.09.47c.61.26 1.07.78 1.07 1.51 0 .73-.46 1.25-1.07 1.51z"/>
                </svg>
                Público
            </a>
            <a href="#social" class="submenu-item" onclick="switchScreen('social')">
                <svg class="submenu-icon" viewBox="0 0 24 24">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.93 14.24l-1.09.47c-.37.16-.77.24-1.17.24-1.37 0-2.49-.99-2.49-2.22 0-1.23 1.12-2.22 2.49-2.22.4 0 .8.08 1.17.24l1.09.47c.61.26 1.07.78 1.07 1.51 0 .73-.46 1.25-1.07 1.51z"/>
                </svg>
                Social
            </a>
            <a href="#blog" class="submenu-item" onclick="switchScreen('blog')">
                <svg class="submenu-icon" viewBox="0 0 24 24">
                    <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
                </svg>
                Blog
            </a>
            <a href="#leads" class="submenu-item" onclick="switchScreen('leads')">
                <svg class="submenu-icon" viewBox="0 0 24 24">
                    <path d="M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"/>
                </svg>
                Leads
            </a>
            <a href="#clients" class="submenu-item" onclick="switchScreen('clients')">
                <svg class="submenu-icon" viewBox="0 0 24 24">
                    <path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5z"/>
                </svg>
                Clientes
            </a>
        </div>
    
    
        <div id="target" class="screen">
            <div class="audience-grid">
                <div class="audience-card">
                    <h3>Perfil Demográfico</h3>
                    <div class="audience-list">
                        <li><strong>Idade:</strong> 25-45 anos</li>
                        <li><strong>Gênero:</strong> Principalmente feminino</li>
                        <li><strong>Localização:</strong> São Marcos - RS (local) e alcance nacional (online)</li>
                    </div>
                </div>
    
                <div class="audience-card">
                    <h3>Interesses</h3>
                    <div class="audience-list">
                        <li>Saúde mental</li>
                        <li>Autoconhecimento</li>
                        <li>Equilíbrio emocional</li>
                    </div>
                </div>
    
                <div class="pain-points">
                    <h3>Principais Dores</h3>
                    <div class="pain-item">Ansiedade</div>
                    <div class="pain-item">Dificuldade em lidar com emoções</div>
                    <div class="pain-item">Falta de orientação para momentos de crise</div>
                </div>
    
                <div class="audience-card">
                    <h3>Objetivos</h3>
                    <div class="audience-list">
                        <li>Melhorar qualidade de vida</li>
                        <li>Buscar praticidade no cuidado mental</li>
                        <li>Encontrar suporte acessível e profissional</li>
                    </div>
                </div>
            </div>
        </div>


        <div id="social" class="screen">
            <div class="sort-section" style="display: flex; align-items: center; gap: 10px;">
                <div class="search-container">
                    <input 
                        type="text" 
                        class="search-input" 
                        placeholder="Buscar post..."
                        onkeyup="searchPosts(this.value)"
                    >
                </div>
                <div class="filter-container">
                    <select class="filter-select" id="canalSelect" onchange="filterPosts('canal', this.value)">
                        <option value="">Todos os Canais</option>
                        ${canaisData.length > 0 ? canaisData.map(canal => `
                            <option value="${canal.id}">${canal.nome}</option>
                        `).join('') : '<option value="">Nenhum canal disponível</option>'}
                    </select>
                </div>
            </div>
            <div class="posts-grid"></div>
        </div>
    

    
        <div id="leads" class="screen">
            <div class="lead-sort">
                <div class="search-container">
                    <input 
                        type="text" 
                        class="search-input" 
                        placeholder="Buscar por nome..."
                        onkeyup="searchLeads(this.value)"
                    >
                </div>
                <div class="sort-buttons-container">
                    <button class="sort-button" data-sort="name" onclick="sortLeads('name')">Ordenar por Nome</button>
                    <button class="sort-button" data-sort="interest" onclick="sortLeads('interest')">Ordenar por Interesse</button>
                    <button class="sort-button" data-sort="date" onclick="sortLeads('date')">Ordenar por Data</button>
                </div>
                <div class="filter-container">
                    <select class="filter-select" id="canalSelectLeads" onchange="filterLeads('canal', this.value)">
                        <option value="">Todos os Canais</option>
                        ${canaisData.length > 0 ? canaisData.map(canal => `
                            <option value="${canal.id}">${canal.nome}</option>
                        `).join('') : '<option value="">Nenhum canal disponível</option>'}
                    </select>
                    <select class="filter-select" onchange="filterLeads('interest', this.value)">
                        <option value="">Todos os Interesses</option>
                        <option value="Terapia Individual">Terapia Individual</option>
                        <option value="Terapia Casal">Terapia Casal</option>
                        <option value="Consulta Online">Consulta Online</option>
                    </select>
                </div>
            </div>
            <div class="leads-grid">
                <!-- Lead cards will be rendered here by JavaScript -->
            </div>
        </div>
    
        <div class="lead-modal" id="leadModal">
            <div class="lead-modal-content">
                <span class="lead-modal-close">&times;</span>
                <div class="lead-details-content"></div>
            </div>
        </div>
    
        <div id="clients" class="screen">
            <div class="clients-grid">
                <!-- Existing client sort/search container remains the same -->
            </div>
        </div>
    
        <!-- Add this side menu container for client details -->
        <div class="side-menu">
            <button class="side-menu-close">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                </svg>
            </button>
            <div class="client-details">
                <!-- Detalhes do cliente ou post -->
            </div>
        </div>
    
        <div id="blog" class="screen">
            <button onclick="createNewBlogPost()" class="form-submit" style="margin-bottom: 20px;">
                Novo Post
            </button>
            <div class="sort-section">
                <div class="search-container">
                    <input 
                        type="text" 
                        class="search-input" 
                        placeholder="Buscar post..."
                        onkeyup="searchBlogPosts(this.value)"
                    >
                </div>
                <div class="filter-container">
                    <select class="filter-select" onchange="filterBlogPosts('status', this.value)">
                        <option value="">Todos os Status</option>
                        <option value="rascunho">Rascunho</option>
                        <option value="agendado">Agendado</option>
                        <option value="publicado">Publicado</option>
                    </select>
                    <select class="filter-select" onchange="filterBlogPosts('categoria', this.value)">
                        <option value="">Todas as Categorias</option>
                        <!-- Will be populated dynamically -->
                    </select>
                </div>
            </div>
            <div class="blog-posts-grid"></div>
        </div>
    
        <footer class="main-footer">
            <div class="footer-content">
                <p>
                    <span>Powered by</span>
                    <a href="https://fossioforce.app.br" target="_blank" class="fossio-force-link">FOSSIO FORCE</a>
                    <span> 2024 Todos os direitos reservados.</span>
                </p>
            </div>
        </footer>
    
    </div>
    
    <script>
    const supabaseUrl = 'https://hlkawnhbsyytixmkmllu.supabase.co';
    const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imhsa2F3bmhic3l5dGl4bWttbGx1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDYzMDc4MjYsImV4cCI6MjA2MTg4MzgyNn0.QtzQD9usxiIz-acAKHDkP56SWFmyk3K8MqzXHXTm_A0';
    
    let postsData = [];
    
    async function fetchPosts() {
        try {
            const response = await fetch(`${supabaseUrl}/rest/v1/v_posts_sociais_com_canais`, {
                headers: {
                    'apikey': supabaseKey,
                    'Authorization': `Bearer ${supabaseKey}`
                }
            });

            if (!response.ok) throw new Error('Network response was not ok');

            postsData = await response.json();
            renderPosts(postsData); // Atualiza a interface com os posts
        } catch (error) {
            console.error('Error fetching posts:', error);
        }
    }
    
    function renderPosts(posts) {
        const postsGrid = document.querySelector('.posts-grid');
        postsGrid.innerHTML = posts.map(post => `
            <div class="post-card">
                <div class="post-header">
                    <div class="post-channel">
                        <i class="${post.canal_icone}"></i>
                        <span>${post.canal_nome}</span>
                    </div>
                    <div class="post-actions">
                        <button class="post-menu-btn" onclick="showPostMenu('${post.post_id}')">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="post-content">
                    <h3>${post.titulo}</h3>
                    ${post.imagem ? `<img src="${post.imagem}" alt="Post image">` : ''}
                    <p>${post.mensagem || ''}</p>
                </div>
                <div class="post-footer">
                    <div class="post-date">
                        ${post.agendado_para ? `Agendado para: ${new Date(post.agendado_para).toLocaleDateString()}` : ''}
                    </div>
                    <a href="${post.canal_url}" target="_blank" class="channel-link">
                        Ver no Canal
                        <svg width="16" height="16" viewBox="0 0 24 24">
                            <path d="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"/>
                        </svg>
                    </a>
                </div>
            </div>
        `).join('');
    }
    
    function searchPosts(searchTerm) {
        const filtered = postsData.filter(post => 
            post.titulo.toLowerCase().includes(searchTerm.toLowerCase()) ||
            post.mensagem?.toLowerCase().includes(searchTerm.toLowerCase())
        );
        renderPosts(filtered);
    }
    
    function filterPosts(type, value) {
        if (!value) {
            renderPosts(postsData);
            return;
        }
        
        const filtered = postsData.filter(post => {
            if (type === 'canal') return post.canal_nome === value;
            return true;
        });
        renderPosts(filtered);
    }
    
    const leadsData = [
        {
            id: 1,
            name: "Maria Silva",
            status: "Novo",
            interest: "Terapia Individual",
            contactDate: "10/06/2024",
            phone: "5551999999999",
            email: "maria@email.com",
            source: "Instagram",
            notes: "Interesse em terapia online, disponibilidade nas terças e quintas",
            followUpDate: "12/06/2024",
            contacted: false
        }
        // Add more leads as needed
    ];
    
    function renderLeads(leads) {
        const leadsGrid = document.querySelector('.leads-grid');
        leadsGrid.innerHTML = leads.map(lead => `
            <div class="contact-card" onclick="showLeadDetails(${lead.id})">
                <div class="contact-info">
                    <div class="contact-name">
                        ${lead.name}
                    </div>
                    <div class="contact-details">
                        <div>Interesse: ${lead.interest}</div>
                        <div>Contato: ${lead.contactDate}</div>
                        <div class="status-checkbox-container" onclick="event.stopPropagation()">
                            <input type="checkbox" 
                                class="status-checkbox" 
                                id="status-${lead.id}" 
                                ${lead.contacted ? 'checked' : ''}
                                onchange="toggleLeadStatus(event, ${lead.id})"
                            >
                            <label for="status-${lead.id}" class="checkbox-label">Marcar como contatado</label>
                        </div>
                    </div>
                </div>
                <a href="https://wa.me/${lead.phone}" class="lead-whatsapp-btn" target="_blank" onclick="event.stopPropagation()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.93 14.24l-1.09.47c-.37.16-.77.24-1.17.24-1.37 0-2.49-.99-2.49-2.22 0-1.23 1.12-2.22 2.49-2.22.4 0 .8.08 1.17.24l1.09.47c.61.26 1.07.78 1.07 1.51 0 .73-.46 1.25-1.07 1.51z"/>
                    </svg>
                </a>
            </div>
        `).join('');
    }
    
    function searchLeads(searchTerm) {
        const filteredLeads = leadsData.filter(lead => 
            lead.name.toLowerCase().includes(searchTerm.toLowerCase())
        );
        renderLeads(filteredLeads);
    }
    
    function sortLeads(sortBy) {
        const sortedLeads = [...leadsData].sort((a, b) => {
            switch(sortBy) {
                case 'name':
                    return a.name.localeCompare(b.name);
                case 'interest':
                    return a.interest.localeCompare(b.interest);
                case 'date':
                    return new Date(b.contactDate) - new Date(a.contactDate);
                default:
                    return 0;
            }
        });
        renderLeads(sortedLeads);
    }
    
    function filterLeads(filterType, value) {
        if (!value) {
            renderLeads(leadsData);
            return;
        }
        
        const filteredLeads = leadsData.filter(lead => 
            lead[filterType].toLowerCase() === value.toLowerCase()
        );
        renderLeads(filteredLeads);
    }
    
    function toggleLeadStatus(event, leadId) {
        event.stopPropagation();
        const lead = leadsData.find(l => l.id === leadId);
        lead.contacted = !lead.contacted;
        lead.status = lead.contacted ? 'Contatado' : 'Novo';
        renderLeads(leadsData);
    }
    
    function showLeadDetails(leadId) {
        const lead = leadsData.find(l => l.id === leadId);
        const modal = document.getElementById('leadModal');
        const content = document.querySelector('.lead-details-content');
        
        content.innerHTML = `
            <h3>${lead.name}</h3>
            <div class="lead-info">
                <p><strong>Status:</strong> <span class="status-badge status-${lead.status.toLowerCase()}">${lead.status}</span></p>
                <p><strong>Interesse:</strong> ${lead.interest}</p>
                <p><strong>Data do Contato:</strong> ${lead.contactDate}</p>
                <p><strong>Telefone:</strong> ${lead.phone}</p>
                <p><strong>Email:</strong> ${lead.email}</p>
                <p><strong>Origem:</strong> ${lead.source}</p>
                <p><strong>Próximo Contato:</strong> ${lead.followUpDate}</p>
                <p><strong>Observações:</strong> ${lead.notes}</p>
            </div>
            <a href="https://wa.me/${lead.phone}" class="whatsapp-btn" target="_blank">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.93 14.24l-1.09.47c-.37.16-.77.24-1.17.24-1.37 0-2.49-.99-2.49-2.22 0-1.23 1.12-2.22 2.49-2.22.4 0 .8.08 1.17.24l1.09.47c.61.26 1.07.78 1.07 1.51 0 .73-.46 1.25-1.07 1.51z"/>
                </svg>
                Enviar Mensagem via WhatsApp
            </a>
        `;
        
        modal.style.display = "block";
    }
    
    document.querySelector('.lead-modal-close').addEventListener('click', () => {
        document.getElementById('leadModal').style.display = "none";
    });
    
    window.addEventListener('click', (event) => {
        const modal = document.getElementById('leadModal');
        if (event.target === modal) {
            modal.style.display = "none";
        }
    });
    
    const clientsData = [
        {
            id: 1,
            name: "João Santos",
            category: "Ansiedade",
            sessionsPerWeek: 2,
            status: "Ativo",
            nextSession: "15/06/2024",
            phone: "5551999999999",
            email: "joao@email.com",
            history: [
                { date: "08/06/2024", notes: "Sessão regular - progresso constante" },
                { date: "01/06/2024", notes: "Primeira avaliação" }
            ],
            treatment: {
                startDate: "01/06/2024",
                plan: "Mensal",
                focus: "Controle de ansiedade"
            }
        },
        // Add more clients here
    ];
    
    function renderClients(clients) {
        const clientsGrid = document.querySelector('.clients-grid');
        clientsGrid.innerHTML = `
            <div class="client-sort">
                <div class="search-container">
                    <input 
                        type="text" 
                        class="search-input" 
                        placeholder="Buscar por nome..."
                        onkeyup="searchClients(this.value)"
                    >
                </div>
                <div class="sort-buttons-container">
                    <button class="sort-button" data-sort="name">Nome</button>
                    <button class="sort-button" data-sort="category">Categoria</button>
                    <button class="sort-button" data-sort="sessions">Sessões/Semana</button>
                </div>
            </div>
            ${clients.map(client => `
                <div class="client-card" data-client-id="${client.id}">
                    <div class="client-info">
                        <div class="contact-name">
                            ${client.name}
                            <span class="status-badge status-${client.status.toLowerCase()}">${client.status}</span>
                        </div>
                        <div class="contact-details">
                            <span class="client-category">${client.category}</span>
                            <p>${client.sessionsPerWeek}x por semana</p>
                            <p>Próxima Sessão: ${client.nextSession}</p>
                        </div>
                    </div>
                    <a href="https://wa.me/${client.phone}" class="client-message-btn" target="_blank">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.93 14.24l-1.09.47c-.37.16-.77.24-1.17.24-1.37 0-2.49-.99-2.49-2.22 0-1.23 1.12-2.22 2.49-2.22.4 0 .8.08 1.17.24l1.09.47c.61.26 1.07.78 1.07 1.51 0 .73-.46 1.25-1.07 1.51z"/>
                        </svg>
                        Mensagem
                    </a>
                </div>
            `).join('')}
        `;
    
        setupEventListeners();
    }
    
    function setupEventListeners() {
        document.querySelectorAll('.sort-button').forEach(button => {
            button.addEventListener('click', (e) => {
                const sortBy = e.target.dataset.sort;
                sortClients(sortBy);
                document.querySelectorAll('.sort-button').forEach(btn => 
                    btn.classList.remove('active')
                );
                e.target.classList.add('active');
            });
        });
    
        document.querySelectorAll('.client-card').forEach(card => {
            card.addEventListener('click', (e) => {
                if (!e.target.closest('.client-message-btn')) {
                    const clientId = card.dataset.clientId;
                    showClientDetails(clientId);
                }
            });
        });
    
        document.querySelector('.side-menu-close').addEventListener('click', () => {
            document.querySelector('.side-menu').classList.remove('active');
        });
    }
    
    function sortClients(sortBy) {
        const sortedClients = [...clientsData].sort((a, b) => {
            switch(sortBy) {
                case 'name':
                    return a.name.localeCompare(b.name);
                case 'category':
                    return a.category.localeCompare(b.category);
                case 'sessions':
                    return b.sessionsPerWeek - a.sessionsPerWeek;
                default:
                    return 0;
            }
        });
        renderClients(sortedClients);
    }
    
    function searchClients(searchTerm) {
        const filteredClients = clientsData.filter(client => 
            client.name.toLowerCase().includes(searchTerm.toLowerCase())
        );
        renderClientsList(filteredClients);
    }
    
    function renderClientsList(clients) {
        const clientsGrid = document.querySelector('.clients-grid');
        const existingSort = clientsGrid.querySelector('.client-sort');
        
        const clientCards = clients.map(client => `
            <div class="client-card" data-client-id="${client.id}">
                <div class="client-info">
                    <div class="contact-name">
                        ${client.name}
                        <span class="status-badge status-${client.status.toLowerCase()}">${client.status}</span>
                    </div>
                    <div class="contact-details">
                        <span class="client-category">${client.category}</span>
                        <p>${client.sessionsPerWeek}x por semana</p>
                        <p>Próxima Sessão: ${client.nextSession}</p>
                    </div>
                </div>
                <a href="https://wa.me/${client.phone}" class="client-message-btn" target="_blank">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.93 14.24l-1.09.47c-.37.16-.77.24-1.17.24-1.37 0-2.49-.99-2.49-2.22 0-1.23 1.12-2.22 2.49-2.22.4 0 .8.08 1.17.24l1.09.47c.61.26 1.07.78 1.07 1.51 0 .73-.46 1.25-1.07 1.51z"/>
                    </svg>
                    Mensagem
                </a>
            </div>
        `).join('');
    
        clientsGrid.innerHTML = '';
        clientsGrid.appendChild(existingSort);
        
        const cardsContainer = document.createElement('div');
        cardsContainer.innerHTML = clientCards;
        while (cardsContainer.firstChild) {
            clientsGrid.appendChild(cardsContainer.firstChild);
        }
    
        setupEventListeners();
    }
    
    function showClientDetails(clientId) {
        const client = clientsData.find(c => c.id === parseInt(clientId));
        const detailsContainer = document.querySelector('.client-details');
        
        detailsContainer.innerHTML = `
            <div class="client-details-section">
                <h3>${client.name}</h3>
                <div class="client-info">
                    <p><strong>Email:</strong> ${client.email}</p>
                    <p><strong>Telefone:</strong> ${client.phone}</p>
                    <p><strong>Categoria:</strong> <span class="client-category">${client.category}</span></p>
                    <p><strong>Status:</strong> <span class="status-badge status-${client.status.toLowerCase()}">${client.status}</span></p>
                </div>
            </div>
            
            <div class="client-details-section">
                <h4>Detalhes do Tratamento</h4>
                <div class="treatment-info">
                    <p><strong>Data de Início:</strong> ${client.treatment.startDate}</p>
                    <p><strong>Plano:</strong> ${client.treatment.plan}</p>
                    <p><strong>Foco do Tratamento:</strong> ${client.treatment.focus}</p>
                    <p><strong>Sessões por Semana:</strong> ${client.sessionsPerWeek}x</p>
                    <p><strong>Próxima Sessão:</strong> ${client.nextSession}</p>
                </div>
            </div>
            
            <div class="client-details-section">
                <h4>Histórico de Sessões</h4>
                <ul class="sessions-list">
                    ${client.history.map(session => `
                        <li>
                            <strong>${session.date}</strong>
                            <span>${session.notes}</span>
                        </li>
                    `).join('')}
                </ul>
            </div>
    
            <a href="https://wa.me/${client.phone}" class="whatsapp-btn" target="_blank">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.93 14.24l-1.09.47c-.37.16-.77.24-1.17.24-1.37 0-2.49-.99-2.49-2.22 0-1.23 1.12-2.22 2.49-2.22.4 0 .8.08 1.17.24l1.09.47c.61.26 1.07.78 1.07 1.51 0 .73-.46 1.25-1.07 1.51z"/>
                </svg>
                Enviar Mensagem via WhatsApp
            </a>
        `;
        
        document.querySelector('.side-menu').classList.add('active');
    }
    
    document.addEventListener('DOMContentLoaded', async () => {
        await fetchCanais(); // Busca os canais ao carregar a página
        renderLeads(leadsData);
        fetchPosts();
        renderClients(clientsData);
    });
    
    function switchScreen(screenId) {
        document.querySelectorAll('.screen').forEach(screen => {
            screen.classList.remove('active');
        });
        document.getElementById(screenId).classList.add('active');
        
        document.querySelectorAll('.submenu-item').forEach(item => {
            item.classList.remove('active');
            if(item.getAttribute('href') === '#' + screenId) {
                item.classList.add('active');
            }
        });
    }
    
    document.querySelectorAll('.submenu-item').forEach(item => {
        item.addEventListener('click', (e) => {
            e.preventDefault();
            const screenId = item.getAttribute('href').replace('#', '');
            switchScreen(screenId);
        });
    });
    
    const currentHash = window.location.hash.replace('#', '') || 'target';
    switchScreen(currentHash);
    
    async function showPostMenu(postId) {
        const post = postsData.find(p => p.post_id === postId);
        const sideMenu = document.querySelector('.side-menu');
        const detailsContainer = document.querySelector('.client-details');

        // Certifique-se de que os canais foram buscados
        await fetchCanais();

        detailsContainer.innerHTML = `
            <div class="client-details-section">
                <h3>Editar Post</h3>
                <form class="post-edit-form" onsubmit="handlePostUpdate(event, '${postId}')">
                    <div class="form-group">
                        <label for="titulo">Título</label>
                        <input type="text" id="titulo" class="form-input" value="${post.titulo}" required>
                    </div>
                    <div class="form-group">
                        <label for="mensagem">Mensagem</label>
                        <textarea id="mensagem" class="form-input form-textarea">${post.mensagem || ''}</textarea>
                    </div>
                    <div class="form-group">
                        <label for="imagem">URL da Imagem</label>
                        <input type="url" id="imagem" class="form-input" value="${post.imagem || ''}">
                    </div>
                    <div class="form-group">
                        <label for="canal_id">Canal de Distribuição</label>
                        <select id="canal_id" class="form-input" required>
                            ${canaisData.length > 0 ? canaisData.map(canal => `
                                <option value="${canal.id}">${canal.nome}</option>
                            `).join('') : '<option value="">Nenhum canal disponível</option>'}
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="status">Status</label>
                        <select id="status" class="form-input" required>
                            <option value="rascunho" ${post.status === 'rascunho' ? 'selected' : ''}>Rascunho</option>
                            <option value="agendado" ${post.status === 'agendado' ? 'selected' : ''}>Agendado</option>
                            <option value="publicado" ${post.status === 'publicado' ? 'selected' : ''}>Publicado</option>
                        </select>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="form-submit">Salvar Alterações</button>
                        <button type="button" class="form-cancel" onclick="closeSideMenu()">Cancelar</button>
                    </div>
                </form>
            </div>
        `;

        sideMenu.classList.add('active');
    }
    
    async function handlePostUpdate(event, postId) {
        event.preventDefault();

        const formData = {
            titulo: document.getElementById('titulo').value,
            mensagem: document.getElementById('mensagem').value,
            canal_id: document.getElementById('canal_id').value,
            status: document.getElementById('status').value,
            atualizado_em: new Date().toISOString()
        };

        try {
            const response = await fetch(`${supabaseUrl}/rest/v1/posts_sociais?id=eq.${postId}`, {
                method: 'PATCH',
                headers: {
                    'apikey': supabaseKey,
                    'Authorization': `Bearer ${supabaseKey}`,
                    'Content-Type': 'application/json',
                    'Prefer': 'return=representation' // Para retornar o post atualizado
                },
                body: JSON.stringify(formData)
            });

            if (!response.ok) throw new Error('Failed to update post');

            fetchPosts(); // Recarrega os posts
            closeSideMenu();
        } catch (error) {
            console.error('Error updating post:', error);
            alert('Erro ao atualizar o post. Tente novamente.');
        }
    }
    
    async function handlePostDelete(postId) {
        if (!confirm('Tem certeza que deseja excluir este post?')) return;
        
        try {
            const response = await fetch(`${supabaseUrl}/rest/v1/posts_sociais?id=eq.${postId}`, {
                method: 'DELETE',
                headers: {
                    'apikey': supabaseKey,
                    'Authorization': `Bearer ${supabaseKey}`,
                    'Prefer': 'return=representation' // Para retornar o post excluído
                }
            });
            
            if (!response.ok) throw new Error('Failed to delete post');
            
            fetchPosts(); // Recarrega os posts
            closeSideMenu();
            
        } catch (error) {
            console.error('Error deleting post:', error);
            alert('Erro ao excluir o post. Tente novamente.');
        }
    }
    
    function closeSideMenu() {
        document.querySelector('.side-menu').classList.remove('active');
    }
    
    let blogPostsData = [];
    let categoriesData = [];
    
    async function fetchBlogPosts() {
        try {
            const response = await fetch(`${supabaseUrl}/rest/v1/v_posts_blog_com_categorias?select=*`, {
                headers: {
                    'apikey': supabaseKey,
                    'Authorization': `Bearer ${supabaseKey}`
                }
            });
            
            if (!response.ok) throw new Error('Network response was not ok');
            
            blogPostsData = await response.json();
            renderBlogPosts(blogPostsData);
        } catch (error) {
            console.error('Error fetching blog posts:', error);
        }
    }
    
    async function fetchCategories() {
        try {
            const response = await fetch(`${supabaseUrl}/rest/v1/categorias?select=*`, {
                headers: {
                    'apikey': supabaseKey,
                    'Authorization': `Bearer ${supabaseKey}`
                }
            });
            
            if (!response.ok) throw new Error('Network response was not ok');
            
            categoriesData = await response.json();
            populateCategorySelect();
        } catch (error) {
            console.error('Error fetching categories:', error);
        }
    }
    
    function populateCategorySelect() {
        const select = document.querySelector('#blog .filter-select:nth-child(2)');
        select.innerHTML = `
            <option value="">Todas as Categorias</option>
            ${categoriesData.map(category => `
                <option value="${category.id}">${category.nome}</option>
            `).join('')}
        `;
    }
    
    function renderBlogPosts(posts) {
        const postsGrid = document.querySelector('.blog-posts-grid');
        if (!postsGrid) {
            console.error('Blog posts grid element not found');
            return;
        }
        
        postsGrid.innerHTML = posts.map(post => `
            <div class="post-card">
                <div class="post-header">
                    <div class="post-channel">
                        <i class="fas fa-blog"></i>
                        <span>${post.categoria_nome || 'Sem categoria'}</span>
                    </div>
                    <div class="post-actions">
                        <button class="post-menu-btn" onclick="showBlogPostMenu('${post.id}')">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="post-content">
                    <h3>${post.titulo || 'Sem título'}</h3>
                    ${post.imagem_capa ? `<img src="${post.imagem_capa}" alt="Post image">` : ''}
                    <p>${truncateHTML(post.conteudo || '', 150)}</p>
                </div>
                <div class="post-footer">
                    <div class="post-date">
                        ${post.publicado_em ? `Publicado em: ${new Date(post.publicado_em).toLocaleDateString()}` : 
                         post.status === 'agendado' ? `Agendado para: ${new Date(post.agendado_para).toLocaleDateString()}` : 
                         'Rascunho'}
                    </div>
                    <a href="/blog/${post.slug}" target="_blank" class="channel-link">
                        Ver Post
                        <svg width="16" height="16" viewBox="0 0 24 24">
                            <path d="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"/>
                        </svg>
                    </a>
                </div>
            </div>
        `).join('');
    }
    
    function truncateHTML(html, maxLength) {
        const div = document.createElement('div');
        div.innerHTML = html;
        const text = div.textContent;
        return text.length > maxLength ? text.slice(0, maxLength) + '...' : text;
    }
    
    function searchBlogPosts(searchTerm) {
        const filtered = blogPostsData.filter(post => 
            post.titulo.toLowerCase().includes(searchTerm.toLowerCase()) ||
            post.conteudo.toLowerCase().includes(searchTerm.toLowerCase())
        );
        renderBlogPosts(filtered);
    }
    
    function filterBlogPosts(type, value) {
        if (!value) {
            renderBlogPosts(blogPostsData);
            return;
        }
        
        const filtered = blogPostsData.filter(post => {
            if (type === 'categoria') return post.categoria_id === value;
            return true;
        });
        renderBlogPosts(filtered);
    }
    
    function generateSlug(title) {
        return title
            .toLowerCase()
            .normalize('NFD')
            .replace(/[\u0300-\u036f]/g, '')
            .replace(/[^a-z0-9]+/g, '-')
            .replace(/(^-|-$)+/g, '');
    }
    
    async function createNewBlogPost() {
        const formData = {
            id: crypto.randomUUID(),
            titulo: "Novo Post",
            slug: "novo-post-" + Date.now(),
            conteudo: "Digite o conteúdo do seu post aqui...",
            status: "rascunho",
            categoria_id: categoriesData[0]?.id,
            criado_em: new Date().toISOString(),
            atualizado_em: new Date().toISOString()
        };
        
        try {
            const response = await fetch(`${supabaseUrl}/rest/v1/posts_blog`, {
                method: 'POST',
                headers: {
                    'apikey': supabaseKey,
                    'Authorization': `Bearer ${supabaseKey}`,
                    'Content-Type': 'application/json',
                    'Prefer': 'return=minimal'
                },
                body: JSON.stringify(formData)
            });
            
            if (!response.ok) throw new Error('Failed to create post');
            
            await fetchBlogPosts();
            showBlogPostMenu(formData.id);
            
        } catch (error) {
            console.error('Error creating blog post:', error);
            alert('Erro ao criar novo post. Tente novamente.');
        }
    }
    
    async function showBlogPostMenu(postId) {
        try {
            if (!postId) {
                showAppAlert('ID do post inválido', 'error');
                return;
            }
    
            const post = blogPostsData.find(p => p.id === postId);
            
            if (!post) {
                showAppAlert('Post não encontrado', 'error');
                return;
            }
    
            if (!categoriesData || !categoriesData.length) {
                await fetchCategories();
                if (!categoriesData.length) {
                    showAppAlert('Erro ao carregar categorias', 'error');
                    return;
                }
            }
            
            const sideMenu = document.querySelector('.side-menu');
            const detailsContainer = document.querySelector('.client-details');
            
            detailsContainer.innerHTML = `
                <div class="client-details-section">
                    <h3>Editar Post do Blog</h3>
                    <form class="post-edit-form" onsubmit="handleBlogPostUpdate(event, '${post.id}')">
                        <div class="form-group">
                            <label for="titulo">Título</label>
                            <input type="text" id="titulo" class="form-input" value="${post.titulo || ''}" 
                                   required onchange="updateSlug(this.value)">
                        </div>
                        
                        <div class="form-group">
                            <label for="slug">Slug</label>
                            <input type="text" id="slug" class="form-input" value="${post.slug || ''}" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="conteudo">Conteúdo</label>
                            <textarea id="conteudo" class="form-input form-textarea" style="min-height: 200px">${post.conteudo || ''}</textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="imagem_capa">URL da Imagem de Capa</label>
                            <input type="url" id="imagem_capa" class="form-input" value="${post.imagem_capa || ''}">
                        </div>
    
                        <div class="form-group">
                            <label for="categoria_id">Categoria</label>
                            <select id="categoria_id" class="form-input" required>
                                ${categoriesData.map(category => `
                                    <option value="${category.id}" ${post.categoria_id === category.id ? 'selected' : ''}>
                                        ${category.nome}
                                    </option>
                                `).join('')}
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="status">Status</label>
                            <select id="status" class="form-input" required onchange="togglePublicationDate(this.value)">
                                <option value="rascunho" ${post.status === 'rascunho' ? 'selected' : ''}>Rascunho</option>
                                <option value="agendado" ${post.status === 'agendado' ? 'selected' : ''}>Agendado</option>
                                <option value="publicado" ${post.status === 'publicado' ? 'selected' : ''}>Publicado</option>
                            </select>
                        </div>
                        
                        <div class="form-group" id="publicationDateGroup" style="display: none;">
                            <label for="publicado_em">Data de Publicação</label>
                            <input type="datetime-local" id="publicado_em" class="form-input" 
                                value="${post.publicado_em ? new Date(post.publicado_em).toISOString().slice(0, 16) : ''}">
                        </div>
                        
                        <div class="form-actions">
                            <button type="submit" class="form-submit">Salvar Alterações</button>
                            <button type="button" class="form-cancel" onclick="closeSideMenu()">Cancelar</button>
                        </div>
                    </form>
                    
                    <div class="delete-confirm">
                        <p>Deseja excluir este post?</p>
                        <div class="delete-actions">
                            <button class="delete-btn" onclick="confirmBlogPostDelete('${post.id}')">Excluir</button>
                            <button class="cancel-btn" onclick="closeSideMenu()">Cancelar</button>
                        </div>
                    </div>
                </div>
            `;
            
            sideMenu.classList.add('active');
            togglePublicationDate(post.status);
        } catch (error) {
            console.error('Error showing blog post menu:', error);
            showAppAlert('Erro ao carregar detalhes do post', 'error');
        }
    }
    
    function updateSlug(title) {
        document.getElementById('slug').value = generateSlug(title);
    }
    
    function togglePublicationDate(status) {
        const dateGroup = document.getElementById('publicationDateGroup');
        dateGroup.style.display = (status === 'publicado' || status === 'agendado') ? 'block' : 'none';
    }
    
    async function handleBlogPostUpdate(event, postId) {
        event.preventDefault();
        
        const formData = {
            titulo: document.getElementById('titulo').value,
            slug: document.getElementById('slug').value,
            conteudo: document.getElementById('conteudo').value,
            imagem_capa: document.getElementById('imagem_capa').value || null,
            categoria_id: document.getElementById('categoria_id').value,
            status: document.getElementById('status').value,
            publicado_em: document.getElementById('publicado_em').value || null,
            atualizado_em: new Date().toISOString()
        };
        
        try {
            const response = await fetch(`${supabaseUrl}/rest/v1/posts_blog?id=eq.${postId}`, {
                method: 'PATCH',
                headers: {
                    'apikey': supabaseKey,
                    'Authorization': `Bearer ${supabaseKey}`,
                    'Content-Type': 'application/json',
                    'Prefer': 'return=minimal'
                },
                body: JSON.stringify(formData)
            });
            
            if (!response.ok) throw new Error('Failed to update post');
            
            await fetchBlogPosts();
            closeSideMenu();
            showAppAlert('Post atualizado com sucesso');
            
        } catch (error) {
            console.error('Error updating blog post:', error);
            showAppAlert('Erro ao atualizar o post', 'error');
        }
    }
    
    async function handleBlogPostDelete(postId) {
        try {
            const response = await fetch(`${supabaseUrl}/rest/v1/posts_blog?id=eq.${postId}`, {
                method: 'DELETE',
                headers: {
                    'apikey': supabaseKey,
                    'Authorization': `Bearer ${supabaseKey}`,
                    'Prefer': 'return=minimal'
                }
            });
            
            if (!response.ok) throw new Error('Failed to delete post');
            
            await fetchBlogPosts();
            closeSideMenu();
            showAppAlert('Post excluído com sucesso');
            
        } catch (error) {
            console.error('Error deleting blog post:', error);
            showAppAlert('Erro ao excluir o post', 'error');
        }
    }
    
    function confirmBlogPostDelete(postId) {
        const confirmDialog = document.createElement('div');
        confirmDialog.className = 'app-alert';
        confirmDialog.innerHTML = `
            <div>
                <p>Tem certeza que deseja excluir este post?</p>
                <div style="margin-top: 10px">
                    <button class="form-submit" onclick="handleBlogPostDelete('${postId}')">Confirmar</button>
                    <button class="form-cancel" onclick="this.parentElement.parentElement.parentElement.remove()">Cancelar</button>
                </div>
            </div>
        `;
        document.body.appendChild(confirmDialog);
    }
    
    function showAppAlert(message, type = 'success') {
        const alertEl = document.createElement('div');
        alertEl.className = `app-alert ${type}`;
        alertEl.innerHTML = `
            ${message}
            <button class="app-alert-close" onclick="this.parentElement.remove()">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                </svg>
            </button>
        `;
        document.body.appendChild(alertEl);
        
        // Auto remove after 5 seconds
        setTimeout(() => alertEl.remove(), 5000);
    }
    
    document.addEventListener('DOMContentLoaded', () => {
        fetchBlogPosts();
        fetchCategories();
    });

    let canaisData = [];

    async function fetchCanais() {
        try {
            const response = await fetch(`${supabaseUrl}/rest/v1/view_canais_sociais_completa`, {
                headers: {
                    'apikey': supabaseKey,
                    'Authorization': `Bearer ${supabaseKey}`
                }
            });

            if (!response.ok) throw new Error('Network response was not ok');

            canaisData = await response.json();
            console.log(canaisData); // Verifique se os dados estão corretos
        } catch (error) {
            console.error('Error fetching canais:', error);
        }
    }
    </script>
    </body></html>
